
$(function(){
	$.fn.extend({
		SimpleTree:function(options){
			
			//?????????
			var option = $.extend({
				click:function(a){ }
			},options);
			
			option.tree=this;	/* ?????????????????????????????????????????ò???? */
			
			option._init=function(){
				/*
				 * ???????????????????????????
				 */				
				this.tree.find("ul ul").hide();	/* ?????????????? */
				this.tree.find("ul ul").prev("li").removeClass("open");	/* ??????????????????? open ??? */
				
				this.tree.find("ul ul[show='true']").show();	/* ??? show ????? true ???????? */
				this.tree.find("ul ul[show='true']").prev("li").addClass("open");	/* ??? show ????? true ?????????????? open ??? */
			}/* option._init() End */
			
			/* ???????г???????????????? */
			this.find("a").click(function(){ $(this).parent("li").click(); return false; });
			
			/* ????? <li> ??????? */
			this.find("li").click(function(){
				/*
				 * ??????????? <li>
				 * 1.????????????????????????? <li> ????е?????????????????????
				 * 2.??????????????????????????????????? true ????????? false????????????? true??
				 * 3.???????????
				 */
				
				option.click($(this).find("a")[0]);	/* ???????? */
				
				/* 
				 * ???????????????????????? show ??????? true????????? show ????? false
				 * ????????? show ????? true
				 */
				if($(this).next("ul").attr("show")=="true"){
					$(this).next("ul").attr("show","false");					
				}else{
					$(this).next("ul").attr("show","true");
				}
				
				/* ???????? */
				option._init();
			});
			
			/* ???????и??????? */
			this.find("ul").prev("li").addClass("folder");
			
			/* ?????????????????? */
			this.find("li").find("a").attr("hasChild",false);
			this.find("ul").prev("li").find("a").attr("hasChild",true);
			
			/* ???????? */
			option._init();
			
		}/* SimpleTree Function End */
		
	});
});